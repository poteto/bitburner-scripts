// @ts-nocheck

const EXPLOITS = [
  'Bypass',
  'PrototypeTampering',
  'Unclickable',
  'UndocumentedFunctionCall',
  'TimeCompression',
  'RealityAlteration',
  'EditSaveFile',
  'N00dles',
];

function importSaveGame(data) {
  return JSON.parse(decodeURIComponent(escape(atob(data))));
}
function exportSaveGame(data) {
  return btoa(unescape(encodeURIComponent(JSON.stringify(data))));
}

function addExploits(data) {
  const saveGame = importSaveGame(data);
  const playerSave = JSON.parse(saveGame.data.PlayerSave);
  const newExploits = new Set(playerSave.data.exploits);
  for (const exploit of EXPLOITS) {
    newExploits.add(exploit);
  }
  playerSave.data.exploits = [...newExploits];
  saveGame.data.PlayerSave = JSON.stringify(playerSave);
  return exportSaveGame(saveGame);
}

console.log(`
Instructions:

1. Copy your save game's contents to your clipboard
2. Paste it in your Chrome's dev console like so:

const oldSave = // "your data here" (don't delete the quotes, it must be a string)
copy(addExploits(oldSave));
console.log('New save game copied to clipboard!');

3. This will automatically copy the new save to your clipboard. Duplicate your old save, paste the
   new save and save the file.
4. Import it into your game and enjoy.
`);
